<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>api/lib/string.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="$api.module_color.html">color</a></li><li><a href="$api.module_img.html">img</a><ul class='methods'><li data-type='method'><a href="$api.module_img.html#~base64">base64</a></li><li data-type='method'><a href="$api.module_img.html#~load">load</a></li></ul></li><li><a href="$api.module_linq.html">linq</a></li><li><a href="$api.module_math.html">math</a></li><li><a href="$api.module_money.html">money</a><ul class='methods'><li data-type='method'><a href="$api.module_money.html#~formatColumn">formatColumn</a></li><li data-type='method'><a href="$api.module_money.html#~formatMoney">formatMoney</a></li><li data-type='method'><a href="$api.module_money.html#~formatNumber">formatNumber</a></li><li data-type='method'><a href="$api.module_money.html#~unformat">unformat</a></li><li data-type='method'><a href="$api.module_money.html#~unit">unit</a></li></ul></li><li><a href="$api.module_os.html">os</a></li><li><a href="$api.module_qs.html">qs</a></li><li><a href="$api.module_storage.html">storage</a><ul class='methods'><li data-type='method'><a href="$api.module_storage.html#~del">del</a></li><li data-type='method'><a href="$api.module_storage.html#~get">get</a></li><li data-type='method'><a href="$api.module_storage.html#~set">set</a></li></ul></li><li><a href="$api.module_string.html">string</a><ul class='methods'><li data-type='method'><a href="$api.module_string.html#~break">break</a></li><li data-type='method'><a href="$api.module_string.html#~byteLength">byteLength</a></li><li data-type='method'><a href="$api.module_string.html#~clearHtml">clearHtml</a></li><li data-type='method'><a href="$api.module_string.html#~html2Text">html2Text</a></li><li data-type='method'><a href="$api.module_string.html#~unique">unique</a></li></ul></li><li><a href="$api.module_type.html">type</a><ul class='methods'><li data-type='method'><a href="$api.module_type.html#~add">add</a></li><li data-type='method'><a href="$api.module_type.html#~isArray">isArray</a></li><li data-type='method'><a href="$api.module_type.html#~isBoolean">isBoolean</a></li><li data-type='method'><a href="$api.module_type.html#~isDate">isDate</a></li><li data-type='method'><a href="$api.module_type.html#~isError">isError</a></li><li data-type='method'><a href="$api.module_type.html#~isFunction">isFunction</a></li><li data-type='method'><a href="$api.module_type.html#~isNaN">isNaN</a></li><li data-type='method'><a href="$api.module_type.html#~isNull">isNull</a></li><li data-type='method'><a href="$api.module_type.html#~isNumber">isNumber</a></li><li data-type='method'><a href="$api.module_type.html#~isObject">isObject</a></li><li data-type='method'><a href="$api.module_type.html#~isPlainObject">isPlainObject</a></li><li data-type='method'><a href="$api.module_type.html#~isRegExp">isRegExp</a></li><li data-type='method'><a href="$api.module_type.html#~isString">isString</a></li><li data-type='method'><a href="$api.module_type.html#~isUndefined">isUndefined</a></li><li data-type='method'><a href="$api.module_type.html#~isWindow">isWindow</a></li></ul></li><li><a href="$plus.module_back.html">back</a><ul class='methods'><li data-type='method'><a href="$plus.module_back.html#~add">add</a></li><li data-type='method'><a href="$plus.module_back.html#~remove">remove</a></li></ul></li><li><a href="$plus.module_clip.html">clip</a><ul class='methods'><li data-type='method'><a href="$plus.module_clip.html#~read">read</a></li><li data-type='method'><a href="$plus.module_clip.html#~write">write</a></li></ul></li><li><a href="$plus.module_img.html">img</a><ul class='methods'><li data-type='method'><a href="$plus.module_img.html#~capture">capture</a></li><li data-type='method'><a href="$plus.module_img.html#~compress">compress</a></li><li data-type='method'><a href="$plus.module_img.html#~pick">pick</a></li><li data-type='method'><a href="$plus.module_img.html#~save">save</a></li></ul></li><li><a href="$plus.module_msg.html">msg</a><ul class='methods'><li data-type='method'><a href="$plus.module_msg.html#~send">send</a></li></ul></li><li><a href="$plus.module_ui.html">ui</a><ul class='methods'><li data-type='method'><a href="$plus.module_ui.html#~beginPullRefresh">beginPullRefresh</a></li><li data-type='method'><a href="$plus.module_ui.html#~closeWaiting">closeWaiting</a></li><li data-type='method'><a href="$plus.module_ui.html#~pullRefresh">pullRefresh</a></li><li data-type='method'><a href="$plus.module_ui.html#~showWaiting">showWaiting</a></li><li data-type='method'><a href="$plus.module_ui.html#~toast">toast</a></li></ul></li><li><a href="$plus.module_win.html">win</a><ul class='methods'><li data-type='method'><a href="$plus.module_win.html#~all">all</a></li><li data-type='method'><a href="$plus.module_win.html#~close">close</a></li><li data-type='method'><a href="$plus.module_win.html#~create">create</a></li><li data-type='method'><a href="$plus.module_win.html#~get">get</a></li><li data-type='method'><a href="$plus.module_win.html#~getTop">getTop</a></li><li data-type='method'><a href="$plus.module_win.html#~goHome">goHome</a></li><li data-type='method'><a href="$plus.module_win.html#~hide">hide</a></li><li data-type='method'><a href="$plus.module_win.html#~home">home</a></li><li data-type='method'><a href="$plus.module_win.html#~id">id</a></li><li data-type='method'><a href="$plus.module_win.html#~isHome">isHome</a></li><li data-type='method'><a href="$plus.module_win.html#~isTop">isTop</a></li><li data-type='method'><a href="$plus.module_win.html#~menu">menu</a></li><li data-type='method'><a href="$plus.module_win.html#~open">open</a></li><li data-type='method'><a href="$plus.module_win.html#~openBrowser">openBrowser</a></li><li data-type='method'><a href="$plus.module_win.html#~show">show</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="$api.html">$api</a><ul class='methods'><li data-type='method'><a href="$api.html#.mix">mix</a></li></ul></li><li><a href="$plus.html">$plus</a><ul class='methods'><li data-type='method'><a href="$plus.html#.errorPage">errorPage</a></li><li data-type='method'><a href="$plus.html#.winStyle">winStyle</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">api/lib/string.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// NOTE: [api] 调用了 $api.type
/**
 * &lt;b>字符串验证(Validators)和清理转换(Sanitizers)的库，&lt;/b>引用自[validator.js]{@link https://github.com/chriso/validator.js}，并进行了扩展&lt;br/>
 * ### [doc] Validators
 * Here is a list of the validators currently available.
 *
 * Validator                               | Description
 * --------------------------------------- | --------------------------------------
 * ***contains(str, seed)***               | check if the string contains the seed.
 * **equals(str, comparison)**             | check if the string matches the comparison.
 * **isAfter(str [, date])**               | check if the string is a date that's after the specified date (defaults to now).
 * **isAlpha(str [, locale])**             | check if the string contains only letters (a-zA-Z).&lt;br/>&lt;br/>Locale is one of `['ar', *  'ar-AE', 'ar-BH', 'ar-DZ', 'ar-EG', 'ar-IQ', 'ar-JO', 'ar-KW', 'ar-LB', 'ar-LY', 'ar-MA', 'ar-QA', 'ar-QM', 'ar-SA', 'ar-SD',  * 'ar-SY', 'ar-TN', 'ar-YE', 'bg-BG', 'cs-CZ', 'da-DK', 'de-DE', 'el-GR', 'en-AU', 'en-GB', 'en-HK', 'en-IN', 'en-NZ', 'en-US',  * 'en-ZA', 'en-ZM', 'es-ES', 'fr-FR', 'hu-HU', 'it-IT', 'nb-NO', 'nl-NL', 'nn-NO', 'pl-PL', 'pt-BR', 'pt-PT', 'ru-RU', 'sk-SK',  * 'sr-RS', 'sr-RS@latin', 'sv-SE', 'tr-TR', 'uk-UA']`) and defaults to `en-US`.
 * **isAlphanumeric(str [, locale])**      | check if the string contains only letters and numbers.&lt;br/>&lt;br/>Locale is one of ` * ['ar', 'ar-AE', 'ar-BH', 'ar-DZ', 'ar-EG', 'ar-IQ', 'ar-JO', 'ar-KW', 'ar-LB', 'ar-LY', 'ar-MA', 'ar-QA', 'ar-QM', 'ar-SA',  * 'ar-SD', 'ar-SY', 'ar-TN', 'ar-YE', 'bg-BG', 'cs-CZ', 'da-DK', 'de-DE', 'el-GR', 'en-AU', 'en-GB', 'en-HK', 'en-IN', 'en-NZ',  * 'en-US', 'en-ZA', 'en-ZM', 'es-ES', 'fr-FR', 'hu-HU', 'it-IT', 'nb-NO', 'nl-NL', 'nn-NO', 'pl-PL', 'pt-BR', 'pt-PT', 'ru-RU',  * 'sk-SK', 'sr-RS', 'sr-RS@latin', 'sv-SE', 'tr-TR', 'uk-UA']`) and defaults to `en-US`.
 * **isAscii(str)**                        | check if the string contains ASCII chars only.
 * **isBase64(str)**                       | check if a string is base64 encoded.
 * **isBefore(str [, date])**              | check if the string is a date that's before the specified date.
 * **isBoolean(str)**                      | check if a string is a boolean.
 * **isByteLength(str [, options])**          | check if the string's length (in UTF-8 bytes) falls in a  * range.&lt;br/>&lt;br/>`options` is an object which defaults to `{min:0, max: undefined}`.
 * **isCreditCard(str)**                   | check if the string is a credit card.
 * **isCurrency(str [, options])**            | check if the string is a valid currency amount.&lt;br/>&lt;br/>`options` is an object  * which defaults to `{symbol: '$', require_symbol: false, allow_space_after_symbol: false, symbol_after_digits: false,  * allow_negatives: true, parens_for_negatives: false, negative_sign_before_digits: false, negative_sign_after_digits: false,  * allow_negative_sign_placeholder: false, thousands_separator: ',', decimal_separator: '.', allow_decimal: true,  * require_decimal: false, digits_after_decimal: [2], allow_space_after_digits: false}`.&lt;br/>**Note:** The array  * `digits_after_decimal` is filled with the exact number of digits allowd not a range, for example a range 1 to 3 will be given  * as [1, 2, 3].
 * **isDataURI(str)**                      | check if the string is a [data uri format] * (https://developer.mozilla.org/en-US/docs/Web/HTTP/data_URIs).
 * **isDecimal(str [, options])**             | check if the string represents a decimal number, such as 0.1, .3, 1.1, 1.00003,  * 4.0, etc.&lt;br/>&lt;br/>`options` is an object which defaults to `{force_decimal: false, decimal_digits: '1,', locale: 'en-US'} * `&lt;br/>&lt;br/>`locale` determine the decimal separator and is one of `['ar', 'ar-AE', 'ar-BH', 'ar-DZ', 'ar-EG', 'ar-IQ', 'ar-JO', *  'ar-KW', 'ar-LB', 'ar-LY', 'ar-MA', 'ar-QA', 'ar-QM', 'ar-SA', 'ar-SD', 'ar-SY', 'ar-TN', 'ar-YE', 'bg-BG', 'cs-CZ', 'da-DK',  * 'de-DE', 'en-AU', 'en-GB', 'en-HK', 'en-IN', 'en-NZ', 'en-US', 'en-ZA', 'en-ZM', 'es-ES', 'fr-FR', 'hu-HU', 'it-IT', 'nb-NO',  * 'nl-NL', 'nn-NO', 'pl-PL', 'pt-BR', 'pt-PT', 'ru-RU', 'sr-RS', 'sr-RS@latin', 'sv-SE', 'tr-TR', 'uk-UA']`.&lt;br/>**Note:**  * `decimal_digits` is given as a range like '1,3', a specific value like '3' or min like '1,'.
 * **isDivisibleBy(str, number)**          | check if the string is a number that's divisible by another.
 * **isEmail(str [, options])**            | check if the string is an email.&lt;br/>&lt;br/>`options` is an object which defaults to ` * { allow_display_name: false, require_display_name: false, allow_utf8_local_part: true, require_tld: true }`. If  * `allow_display_name` is set to true, the validator will also match `Display Name &lt;email-address>`. If `require_display_name`  * is set to true, the validator will reject strings without the format `Display Name &lt;email-address>`. If  * `allow_utf8_local_part` is set to false, the validator will not allow any non-English UTF8 character in email address' local  * part. If `require_tld` is set to false, e-mail addresses without having TLD in their domain will also be matched.
 * **isEmpty(str)**                        | check if the string has a length of zero.
 * **isFQDN(str [, options])**             | check if the string is a fully qualified domain name (e.g. domain.com) * .&lt;br/>&lt;br/>`options` is an object which defaults to `{ require_tld: true, allow_underscores: false, allow_trailing_dot: false } * `.
 * **isFloat(str [, options])**            | check if the string is a float.&lt;br/>&lt;br/>`options` is an object which can contain  * the keys `min`, `max`, `gt`, and/or `lt` to validate the float is within boundaries (e.g. `{ min: 7.22, max: 9.55 }`) it also  * has `locale` as an option.&lt;br/>&lt;br/>`min` and `max` are equivalent to 'greater or equal' and 'less or equal', respectively  * while `gt` and `lt` are their strict counterparts.&lt;br/>&lt;br/>`locale` determine the decimal separator and is one of `['ar',  * 'ar-AE', 'ar-BH', 'ar-DZ', 'ar-EG', 'ar-IQ', 'ar-JO', 'ar-KW', 'ar-LB', 'ar-LY', 'ar-MA', 'ar-QA', 'ar-QM', 'ar-SA', 'ar-SD',  * 'ar-SY', 'ar-TN', 'ar-YE', 'bg-BG', 'cs-CZ', 'da-DK', 'de-DE', 'en-AU', 'en-GB', 'en-HK', 'en-IN', 'en-NZ', 'en-US', 'en-ZA',  * 'en-ZM', 'es-ES', 'fr-FR', 'hu-HU', 'it-IT', 'nb-NO', 'nl-NL', 'nn-NO', 'pl-PL', 'pt-BR', 'pt-PT', 'ru-RU', 'sr-RS',  * 'sr-RS@latin', 'sv-SE', 'tr-TR', 'uk-UA']`.
 * **isFullWidth(str)**                    | check if the string contains any full-width chars.
 * **isHalfWidth(str)**                    | check if the string contains any half-width chars.
 * **isHash(str, algorithm)**              | check if the string is a hash of type algorithm.&lt;br/>&lt;br/>Algorithm is one of ` * ['md4', 'md5', 'sha1', 'sha256', 'sha384', 'sha512', 'ripemd128', 'ripemd160', 'tiger128', 'tiger160', 'tiger192', 'crc32',  * 'crc32b']`
 * **isHexColor(str)**                     | check if the string is a hexadecimal color.
 * **isHexadecimal(str)**                  | check if the string is a hexadecimal number.
 * **isIP(str [, version])**               | check if the string is an IP (version 4 or 6).
 * **isISBN(str [, version])**             | check if the string is an ISBN (version 10 or 13).
 * **isISSN(str [, options])**             | check if the string is an [ISSN] * (https://en.wikipedia.org/wiki/International_Standard_Serial_Number).&lt;br/>&lt;br/>`options` is an object which defaults to `{  * case_sensitive: false, require_hyphen: false }`. If `case_sensitive` is true, ISSNs with a lowercase `'x'` as the check digit  * are rejected.
 * **isISIN(str)**                         | check if the string is an [ISIN][ISIN] (stock/security identifier).
 * **isISO8601(str)**                      | check if the string is a valid [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)  * date.
 * **isRFC3339(str)**                      | check if the string is a valid [RFC 3339](https://tools.ietf.org/html/rfc3339) date.
 * **isISO31661Alpha2(str)**               | check if the string is a valid [ISO 3166-1 alpha-2] * (https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) officially assigned country code.
 * **isISO31661Alpha3(str)**               | check if the string is a valid [ISO 3166-1 alpha-3] * (https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3) officially assigned country code.
 * **isISRC(str)**                         | check if the string is a [ISRC] * (https://en.wikipedia.org/wiki/International_Standard_Recording_Code).
 * **isIn(str, values)**                   | check if the string is in a array of allowed values.
 * **isInt(str [, options])**              | check if the string is an integer.&lt;br/>&lt;br/>`options` is an object which can contain  * the keys `min` and/or `max` to check the integer is within boundaries (e.g. `{ min: 10, max: 99 }`). `options` can also  * contain the key `allow_leading_zeroes`, which when set to false will disallow integer values with leading zeroes (e.g. `{  * allow_leading_zeroes: false }`). Finally, `options` can contain the keys `gt` and/or `lt` which will enforce integers being  * greater than or less than, respectively, the value provided (e.g. `{gt: 1, lt: 4}` for a number between 1 and 4).
 * **isJSON(str)**                         | check if the string is valid JSON (note: uses JSON.parse).
 * **isLatLong(str)**                      | check if the string is a valid latitude-longitude coordinate in the format `lat, * long` or `lat, long`.
 * **isLength(str [, options])**              | check if the string's length falls in a range.&lt;br/>&lt;br/>`options` is an object  * which defaults to `{min:0, max: undefined}`. Note: this function takes into account surrogate pairs.
 * **isLowercase(str)**                    | check if the string is lowercase.
 * **isMACAddress(str)**                   | check if the string is a MAC address.
 * **isMD5(str)**                          | check if the string is a MD5 hash.
 * **isMimeType(str)**                     | check if the string matches to a valid [MIME type] * (https://en.wikipedia.org/wiki/Media_type) format
 * **isMobilePhone(str, locale [, options])**          | check if the string is a mobile phone number,&lt;br/>&lt;br/>(locale is either  * an array of locales (e.g `['sk-SK', 'sr-RS']`) OR one of `['ar-AE', 'ar-DZ', 'ar-EG', 'ar-JO', 'ar-SA', 'ar-SY', 'ar-TN',  * 'be-BY', 'bg-BG', 'cs-CZ', 'de-DE', 'da-DK', 'el-GR', 'en-AU', 'en-CA', 'en-GB', 'en-HK', 'en-IN',  'en-KE', 'en-NG', 'en-NZ',  * 'en-RW', 'en-SG', 'en-UG', 'en-US', 'en-TZ', 'en-ZA', 'en-ZM', 'en-PK', 'es-ES', 'et-EE', 'fa-IR', 'fi-FI', 'fr-FR', 'he-IL',  * 'hu-HU', 'it-IT', 'ja-JP', 'kk-KZ', 'ko-KR', 'lt-LT', 'ms-MY', 'nb-NO', 'nn-NO', 'pl-PL', 'pt-PT', 'pt-BR', 'ro-RO', 'ru-RU',  * 'sk-SK', 'sr-RS', 'sv-SE', 'th-TH', 'tr-TR', 'uk-UA', 'vi-VN', 'zh-CN', 'zh-HK', 'zh-TW']` OR 'any'. If 'any' is used,  * function will check if any of the locales match).&lt;br/>&lt;br/>`options` is an optional object that can be supplied with the  * following keys: `strictMode`, if this is set to `true`, the mobile phone number must be supplied with the country code and  * therefore must start with `+`.
 * **isMongoId(str)**                      | check if the string is a valid hex-encoded representation of a [MongoDB ObjectId] * [mongoid].
 * **isMultibyte(str)**                    | check if the string contains one or more multibyte chars.
 * **isNumeric(str)**                      | check if the string contains only numbers.
 * **isPort(str)**                         | check if the string is a valid port number.
 * **isPostalCode(str, locale)**           | check if the string is a postal code,&lt;br/>&lt;br/>(locale is one of `[ 'AT', 'AU', 'BE', *  'BG', 'CA', 'CH', 'CZ', 'DE', 'DK', 'DZ', 'EE', 'ES', 'FI', 'FR', 'GB', 'GR', 'HR', 'HU', 'IL', 'IN', 'IS', 'IT', 'JP', 'KE',  * 'LI', 'LT', 'LU', 'LV', 'MX', 'NL', 'NO', 'PL', 'PT', 'RO', 'RU', 'SA', 'SE', 'SI', 'TN', 'TW', 'US', 'ZA', 'ZM' ]` OR 'any'.  * If 'any' is used, function will check if any of the locals match. locale list is `validator.isPostalCodeLocales`.).
 * **isSurrogatePair(str)**                | check if the string contains any surrogate pairs chars.
 * **isURL(str [, options])**              | check if the string is an URL.&lt;br/>&lt;br/>`options` is an object which defaults to `{  * protocols: ['http','https','ftp'], require_tld: true, require_protocol: false, require_host: true, require_valid_protocol:  * true, allow_underscores: false, host_whitelist: false, host_blacklist: false, allow_trailing_dot: false,  * allow_protocol_relative_urls: false }`.
 * **isUUID(str [, version])**             | check if the string is a UUID (version 3, 4 or 5).
 * **isUppercase(str)**                    | check if the string is uppercase.
 * **isVariableWidth(str)**                | check if the string contains a mixture of full and half-width chars.
 * **isWhitelisted(str, chars)**           | checks characters if they appear in the whitelist.
 * **matches(str, pattern [, modifiers])** | check if string matches the pattern.&lt;br/>&lt;br/>Either `matches('foo', /foo/i)` or  * `matches('foo', 'foo', 'i')`.
 *
 * ### [doc] Sanitizers
 *
 * Here is a list of the sanitizers currently available.
 *
 * Sanitizer                              | Description
 * -------------------------------------- | -------------------------------
 * **blacklist(input, chars)**            | remove characters that appear in the blacklist. The characters are used in a RegExp  * and so you will need to escape some chars, e.g. `blacklist(input, '\\[\\]')`.
 * **escape(input)**                      | replace `&lt;`, `>`, `&amp;`, `'`, `"` and `/` with HTML entities.
 * **unescape(input)**                    | replaces HTML encoded entities with `&lt;`, `>`, `&amp;`, `'`, `"` and `/`.
 * **ltrim(input [, chars])**             | trim characters from the left-side of the input.
 * **normalizeEmail(email [, options])**  | canonicalizes an email address. (This doesn't validate that the input is an email, if  * you want to validate the email use isEmail beforehand)&lt;br/>&lt;br/>`options` is an object with the following keys and default  * values:&lt;br/>&lt;ul>&lt;li>*all_lowercase: true* - Transforms the local part (before the @ symbol) of all email addresses to  * lowercase. Please note that this may violate RFC 5321, which gives providers the possibility to treat the local part of email  * addresses in a case sensitive way (although in practice most - yet not all - providers don't). The domain part of the email  * address is always lowercased, as it's case insensitive per RFC 1035.&lt;/li>&lt;li>*gmail_lowercase: true* - GMail addresses are  * known to be case-insensitive, so this switch allows lowercasing them even when *all_lowercase* is set to false. Please note  * that when *all_lowercase* is true, GMail addresses are lowercased regardless of the value of this  * setting.&lt;/li>&lt;li>*gmail_remove_dots: true*: Removes dots from the local part of the email address, as GMail ignores them (e.g.  * "john.doe" and "johndoe" are considered equal).&lt;/li>&lt;li>*gmail_remove_subaddress: true*: Normalizes addresses by removing  * "sub-addresses", which is the part following a "+" sign (e.g. "foo+bar@gmail.com" becomes "foo@gmail.com") * .&lt;/li>&lt;li>*gmail_convert_googlemaildotcom: true*: Converts addresses with domain @googlemail.com to @gmail.com, as they're  * equivalent.&lt;/li>&lt;li>*outlookdotcom_lowercase: true* - Outlook.com addresses (including Windows Live and Hotmail) are known to  * be case-insensitive, so this switch allows lowercasing them even when *all_lowercase* is set to false. Please note that when  * *all_lowercase* is true, Outlook.com addresses are lowercased regardless of the value of this  * setting.&lt;/li>&lt;li>*outlookdotcom_remove_subaddress: true*: Normalizes addresses by removing "sub-addresses", which is the part  * following a "+" sign (e.g. "foo+bar@outlook.com" becomes "foo@outlook.com").&lt;/li>&lt;li>*yahoo_lowercase: true* - Yahoo Mail  * addresses are known to be case-insensitive, so this switch allows lowercasing them even when *all_lowercase* is set to false.  * Please note that when *all_lowercase* is true, Yahoo Mail addresses are lowercased regardless of the value of this  * setting.&lt;/li>&lt;li>*yahoo_remove_subaddress: true*: Normalizes addresses by removing "sub-addresses", which is the part  * following a "-" sign (e.g. "foo-bar@yahoo.com" becomes "foo@yahoo.com").&lt;/li>&lt;li>*icloud_lowercase: true* - iCloud addresses  * (including MobileMe) are known to be case-insensitive, so this switch allows lowercasing them even when *all_lowercase* is set  * to false. Please note that when *all_lowercase* is true, iCloud addresses are lowercased regardless of the value of this  * setting.&lt;/li>&lt;li>*icloud_remove_subaddress: true*: Normalizes addresses by removing "sub-addresses", which is the part  * following a "+" sign (e.g. "foo+bar@icloud.com" becomes "foo@icloud.com").&lt;/li>&lt;/ul>
 * **rtrim(input [, chars])**             | trim characters from the right-side of the input.
 * **stripLow(input [, keep_new_lines])** | remove characters with a numerical value &lt; 32 and 127, mostly control characters. If  * `keep_new_lines` is `true`, newline characters are preserved (`\n` and `\r`, hex `0xA` and `0xD`). Unicode-safe in JavaScript.
 * **toBoolean(input [, strict])**        | convert the input string to a boolean. Everything except for `'0'`, `'false'` and  * `''` returns `true`. In strict mode only `'1'` and `'true'` return `true`.
 * **toDate(input)**                      | convert the input string to a date, or `null` if the input is not a date.
 * **toFloat(input)**                     | convert the input string to a float, or `NaN` if the input is not a float.
 * **toInt(input [, radix])**             | convert the input string to an integer, or `NaN` if the input is not an integer.
 * **trim(input [, chars])**              | trim characters (whitespace by default) from both sides of the input.
 * **whitelist(input, chars)**            | remove characters that do not appear in the whitelist. The characters are used in a  * RegExp and so you will need to escape some chars, e.g. `whitelist(input, '\\[\\]')`.
 * @module string
 * @memberof $api
 * @summary 字符串验证和清理转换的库。
 */
// var validator = require('validator')

import validator from "validator";

/**
 * 去html标签
 * @public
 * @function clearHtml
 * @param {string} html - html字符串
 * @return {string} 去html标签的字符串
 */

 

/**
 * 文本自动换行
 * @public
 * @function break
 * @param {String} txt - 文本
 * @param {Number} [lineLength=10] - 换行长度，0：表示不处理
 * @param {String} [lineBreak="\r\n"] - 换行符
 * @returns {String} 换行处理过的字符串
 */
validator.break = function(txt, lineLength, lineBreak) {
  if (txt === undefined) {
    txt = "";
  }
  if (lineLength === undefined) {
    lineLength = 10;
  }
  if (lineBreak === undefined) {
    lineBreak = "\r\n";
  }
  if (!txt) {
    return "";
  }
  lineLength = parseInt(lineLength);
  if (isNaN(lineLength)) {
    lineLength = 0;
  }
  if (lineLength &lt;= 0) {
    return txt;
  }
  // http://www.makaidong.com/%E5%8D%9A%E5%AE%A2%E5%9B%AD%E7%9F%A5%E8%AF%86%E5%BA%93/18649.shtml
  if (txt.replace(/[^\x00-\xff]/g, "xx").length &lt;= lineLength) {
    return txt;
  }
  var str = "";
  var l = 0;
  var schar;
  for (var i = 0; (schar = txt.charAt(i)); i++) {
    str += schar;
    l += schar.match(/[^\x00-\xff]/) != null ? 2 : 1;
    if (l >= lineLength) {
      str += lineBreak;
      l = 0;
    }
  }
  return str;
};

/**
 * html转换成文本
 * @public
 * @function html2Text
 * @param {string} html - html字符串
 * @returns {string} 去html格式的纯文本
 */
validator.html2Text = function(html) {
  const div = document.createElement("div");
  div.innerHTML = html;
  return div.textContent || div.innerText;
};

// validator.clearHtml = function(html) {
//   var doc = "";

//   if ($api.type.isString(html)) {
//     // doc = html.replace(/^[^\/]+\/\*!?\s?/, '').replace(/\*\/[^\/]+$/, '').trim().replace(/>\s*&lt;/g, '>&lt;')
//     doc = html.replace(/&lt;\/?.+?>/g, "");
//   }
//   return doc;
// };

/**
 * 计算字符串的字节长度（双字节按照2个长度计算）
 * @public
 * @function byteLength
 * @param {string} str 字符串
 * @returns {number} 字符串字节长度
 */
validator.byteLength = function(str) {
  // returns the byte length of an utf8 string
  let s = str.length;
  for (var i = str.length - 1; i >= 0; i--) {
    const code = str.charCodeAt(i);
    if (code > 0x7f &amp;&amp; code &lt;= 0x7ff) s++;
    else if (code > 0x7ff &amp;&amp; code &lt;= 0xffff) s += 2;
    if (code >= 0xdc00 &amp;&amp; code &lt;= 0xdfff) i--;
  }
  return s;
};

/**
 * 随机唯一码
 * @public
 * @function unique
 * @returns {string} 唯一码
 */
validator.unique = function() {
  const timestamp = +new Date() + "";
  const randomNum = parseInt((1 + Math.random()) * 65536) + "";
  return (+(randomNum + timestamp)).toString(32);
};

if (!window.$api.string) {
  Object.defineProperty(window.$api, "string", {
    configurable: false,
    enumerable: false,
    Writable: false,
    get: function() {
      return validator;
    }
  });
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Tue Nov 19 2019 10:16:03 GMT+0800 (GMT+08:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
