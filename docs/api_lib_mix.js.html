<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>api/lib/mix.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="$api.module_color.html">color</a></li><li><a href="$api.module_img.html">img</a><ul class='methods'><li data-type='method'><a href="$api.module_img.html#~base64">base64</a></li><li data-type='method'><a href="$api.module_img.html#~load">load</a></li></ul></li><li><a href="$api.module_linq.html">linq</a></li><li><a href="$api.module_math.html">math</a></li><li><a href="$api.module_money.html">money</a><ul class='methods'><li data-type='method'><a href="$api.module_money.html#~formatColumn">formatColumn</a></li><li data-type='method'><a href="$api.module_money.html#~formatMoney">formatMoney</a></li><li data-type='method'><a href="$api.module_money.html#~formatNumber">formatNumber</a></li><li data-type='method'><a href="$api.module_money.html#~unformat">unformat</a></li><li data-type='method'><a href="$api.module_money.html#~unit">unit</a></li></ul></li><li><a href="$api.module_os.html">os</a></li><li><a href="$api.module_qs.html">qs</a></li><li><a href="$api.module_storage.html">storage</a><ul class='methods'><li data-type='method'><a href="$api.module_storage.html#~del">del</a></li><li data-type='method'><a href="$api.module_storage.html#~get">get</a></li><li data-type='method'><a href="$api.module_storage.html#~set">set</a></li></ul></li><li><a href="$api.module_string.html">string</a><ul class='methods'><li data-type='method'><a href="$api.module_string.html#~break">break</a></li><li data-type='method'><a href="$api.module_string.html#~byteLength">byteLength</a></li><li data-type='method'><a href="$api.module_string.html#~clearHtml">clearHtml</a></li><li data-type='method'><a href="$api.module_string.html#~html2Text">html2Text</a></li><li data-type='method'><a href="$api.module_string.html#~unique">unique</a></li></ul></li><li><a href="$api.module_type.html">type</a><ul class='methods'><li data-type='method'><a href="$api.module_type.html#~add">add</a></li><li data-type='method'><a href="$api.module_type.html#~isArray">isArray</a></li><li data-type='method'><a href="$api.module_type.html#~isBoolean">isBoolean</a></li><li data-type='method'><a href="$api.module_type.html#~isDate">isDate</a></li><li data-type='method'><a href="$api.module_type.html#~isError">isError</a></li><li data-type='method'><a href="$api.module_type.html#~isFunction">isFunction</a></li><li data-type='method'><a href="$api.module_type.html#~isNaN">isNaN</a></li><li data-type='method'><a href="$api.module_type.html#~isNull">isNull</a></li><li data-type='method'><a href="$api.module_type.html#~isNumber">isNumber</a></li><li data-type='method'><a href="$api.module_type.html#~isObject">isObject</a></li><li data-type='method'><a href="$api.module_type.html#~isPlainObject">isPlainObject</a></li><li data-type='method'><a href="$api.module_type.html#~isRegExp">isRegExp</a></li><li data-type='method'><a href="$api.module_type.html#~isString">isString</a></li><li data-type='method'><a href="$api.module_type.html#~isUndefined">isUndefined</a></li><li data-type='method'><a href="$api.module_type.html#~isWindow">isWindow</a></li></ul></li><li><a href="$plus.module_back.html">back</a><ul class='methods'><li data-type='method'><a href="$plus.module_back.html#~add">add</a></li><li data-type='method'><a href="$plus.module_back.html#~remove">remove</a></li></ul></li><li><a href="$plus.module_clip.html">clip</a><ul class='methods'><li data-type='method'><a href="$plus.module_clip.html#~read">read</a></li><li data-type='method'><a href="$plus.module_clip.html#~write">write</a></li></ul></li><li><a href="$plus.module_img.html">img</a><ul class='methods'><li data-type='method'><a href="$plus.module_img.html#~capture">capture</a></li><li data-type='method'><a href="$plus.module_img.html#~compress">compress</a></li><li data-type='method'><a href="$plus.module_img.html#~pick">pick</a></li><li data-type='method'><a href="$plus.module_img.html#~save">save</a></li></ul></li><li><a href="$plus.module_msg.html">msg</a><ul class='methods'><li data-type='method'><a href="$plus.module_msg.html#~send">send</a></li></ul></li><li><a href="$plus.module_ui.html">ui</a><ul class='methods'><li data-type='method'><a href="$plus.module_ui.html#~beginPullRefresh">beginPullRefresh</a></li><li data-type='method'><a href="$plus.module_ui.html#~closeWaiting">closeWaiting</a></li><li data-type='method'><a href="$plus.module_ui.html#~pullRefresh">pullRefresh</a></li><li data-type='method'><a href="$plus.module_ui.html#~showWaiting">showWaiting</a></li><li data-type='method'><a href="$plus.module_ui.html#~toast">toast</a></li></ul></li><li><a href="$plus.module_win.html">win</a><ul class='methods'><li data-type='method'><a href="$plus.module_win.html#~all">all</a></li><li data-type='method'><a href="$plus.module_win.html#~close">close</a></li><li data-type='method'><a href="$plus.module_win.html#~create">create</a></li><li data-type='method'><a href="$plus.module_win.html#~get">get</a></li><li data-type='method'><a href="$plus.module_win.html#~getTop">getTop</a></li><li data-type='method'><a href="$plus.module_win.html#~goHome">goHome</a></li><li data-type='method'><a href="$plus.module_win.html#~hide">hide</a></li><li data-type='method'><a href="$plus.module_win.html#~home">home</a></li><li data-type='method'><a href="$plus.module_win.html#~id">id</a></li><li data-type='method'><a href="$plus.module_win.html#~isHome">isHome</a></li><li data-type='method'><a href="$plus.module_win.html#~isTop">isTop</a></li><li data-type='method'><a href="$plus.module_win.html#~menu">menu</a></li><li data-type='method'><a href="$plus.module_win.html#~open">open</a></li><li data-type='method'><a href="$plus.module_win.html#~openBrowser">openBrowser</a></li><li data-type='method'><a href="$plus.module_win.html#~show">show</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="$api.html">$api</a><ul class='methods'><li data-type='method'><a href="$api.html#.mix">mix</a></li></ul></li><li><a href="$plus.html">$plus</a><ul class='methods'><li data-type='method'><a href="$plus.html#.errorPage">errorPage</a></li><li data-type='method'><a href="$plus.html#.winStyle">winStyle</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">api/lib/mix.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// NOTE: [api] 调用了 $api.type
/**
 * 深度对象拷贝
 * @memberof $api
 * @param {boolean} [deep=false] 是否深度拷贝
 * @param {object} target 对象扩展。这将接收新的属性。
 * @param {...object} objects 一个或多个对象，合并到target
 * @returns {object} 返回 target
 * @example
 * // 多个对象拷贝
 * // {"title":"sss","obj":{"sub":"abc","test":"sub123"}}
 * $api.mix(
 *  {
 *    title:'dd',
 *    obj:{sub:'abc',subtitle:'sub'}
 *  },
 *  {
 *    title:'sss',
 *    obj:{sub:'abc',test:'sub123'}
 *  }
 * )
 *
 * // 多个对象深度拷贝
 * // {"title":"sss","obj":{"sub":"abc","subtitle":"sub","test":"sub123"}}
 * $api.mix(
 *  true,
 *  {
 *    title:'dd',
 *    id:123,
 *    obj:{sub:'abc',subtitle:'sub'}
 *  },
 *  {
 *    title:'sss',
 *    id1:123,
 *    obj:{sub:'abc',test:'sub123'}}
 * )
 *
 * // 多个数组拷贝
 * // [4,{"sub":"abc","test":"sub123"},3,5]
 * $api.mix(
 *  [1,{sub:'abc',subtitle:'sub'},2,5],
 *  [4,{sub:'abc',test:'sub123'},3]
 * )
 *
 * // 多个数组深度拷贝
 * // [4,{"sub":"abc","subtitle":"sub","test":"sub123"},3,5]
 * $api.mix(
 *  true,
 *  [1,{sub:'abc',subtitle:'sub'},2,5],
 *  [4,{sub:'abc',test:'sub123'},3]
 * )
 *
 * // 对象拷贝到数组中,合并后既是数组也是对象
 * var a= [1,1,2], b={title:'dd',id:123}
 * $api.mix(a,b)
 * JSON.stringify(a)  // "[1,1,2]"
 * console.log(a)     // (3) [1, 1, 2, title: "dd", id: 123]
 * a.title            // "dd"
 * a.id               // 123
 *
 * // 数组拷贝到对象中,合并后还是对象
 * // {"0":1,"1":1,"2":2,"title":"dd","id":123}
 * $api.mix({title:'dd',id:123},[1,1,2])
 */
function mix(deep, target, objects) {
  if (deep === undefined) {
    deep = false
  }
  var len = arguments.length,
    i = 0,
    _deep = false
  if (isBoolean(deep)) {
    i++
    _deep = deep
  } else {
    target = deep
  }
  while (++i &lt; len) {
    var obj = arguments[i]
    if (isObject(obj) || isArray(obj)) {
      forIn(obj, copy, target, _deep)
    }
  }
  return target
}

function copy(val, key, deep) {
  if (key === '__proto__') {
    return
  }

  var obj = this[key]
  if (
    deep &amp;&amp;
    (isObject(obj) || isArray(obj)) &amp;&amp;
    (isObject(val) || isArray(val))
  ) {
    mix(true, obj, val)
  } else {
    this[key] = val
  }
}

function forIn(obj, fn, thisArg, deep) {
  for (var key in obj) {
    if (fn.call(thisArg, obj[key], key, deep) === false) {
      break
    }
  }
}
var isObject = $api.type.isPlainObject
var isArray = $api.type.isArray
var isBoolean = $api.type.isBoolean

if (!window.$api.mix) {
  Object.defineProperty(window.$api, 'mix', {
    configurable: false,
    enumerable: false,
    Writable: false,
    get: function() {
      return mix
    }
  })
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Tue Nov 19 2019 10:16:03 GMT+0800 (GMT+08:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
